<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the dccvalidator app in PsychENCODE • dccvalidator</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the dccvalidator app in PsychENCODE">
<meta property="og:description" content="dccvalidator">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dccvalidator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0.9025</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/customizing-dccvalidator.html">Customizing dccvalidator</a>
    </li>
    <li>
      <a href="../articles/deploying-dccvalidator.html">Deploying dccvalidator</a>
    </li>
    <li>
      <a href="../articles/study-documentation-amp-ad.html">AMP-AD Study Documentation</a>
    </li>
    <li>
      <a href="../articles/study-documentation-pec.html">PEC Study Documentation</a>
    </li>
    <li>
      <a href="../articles/using-the-dccvalidator-app-amp-ad.html">Using the dccvalidator app in AMP-AD</a>
    </li>
    <li>
      <a href="../articles/using-the-dccvalidator-pec.html">Using the dccvalidator app in PsychENCODE</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Sage-Bionetworks/dccvalidator/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="using-the-dccvalidator-pec_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using the dccvalidator app in PsychENCODE</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Sage-Bionetworks/dccvalidator/blob/master/vignettes/using-the-dccvalidator-pec.Rmd"><code>vignettes/using-the-dccvalidator-pec.Rmd</code></a></small>
      <div class="hidden name"><code>using-the-dccvalidator-pec.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>We’ve built the dccvalidator tool to streamline the process of data validation and QA/QC. As the PsychENCODE (PEC) Knowledge Portal has grown to more than 39 contributing labs and over 90,000 data files, we’ve realized a need to be more standardized in our approaches to data curation. Thus, we built an application that performs many of the routine data quality checks we previously conducted by hand, with the hopes that it will help you, the data contributor, get your data checked, validated,nand shared easily and quickly.</p>
<p>The application is hosted on a Shiny server <a href="https://shinypro.synapse.org/users/kmontgomery/dccvalidator" target="_blank">here</a>.</p>
</div>
<div id="instructions" class="section level1">
<h1 class="hasAnchor">
<a href="#instructions" class="anchor"></a>Instructions</h1>
<p>To use this application you must:</p>
<ol style="list-style-type: decimal">
<li>Be logged in to Synapse in your browser</li>
<li>Be a <a href="https://docs.synapse.org/articles/accounts_certified_users_and_profile_validation.html" target="_blank">Synapse certified user</a>
</li>
<li>Be a member of the <a href="https://www.synapse.org/#!Team:3323356" target="_blank">PEC team</a>
</li>
</ol>
<p>Some portions of the app submit data to Synapse. This allows curators at Sage to troubleshoot issues if needed. No one outside the Sage curation team will be able to download the data.</p>
<div id="data-submission-agreement" class="section level2">
<h2 class="hasAnchor">
<a href="#data-submission-agreement" class="anchor"></a>Data Submission Agreement</h2>
<p>In order to contribute data to the PsychENCODE Knowledge Portal, <a href="https://www.synapse.org/#!Synapse:syn18420555" target="_blank">signing this agreement</a> is required for each data set. In this agreement, you will acknowledge:</p>
<ul>
<li><p>You are the expert of the content of your data! As a data contributor, you are responsible for ensuring your data is compliant with relevant policies and does not disclose the identity of research participants.</p></li>
<li><p>If you discover you have released sensitive information in error, please follow the <a href="https://docs.synapse.org/articles/contribute_and_access_controlled_use_data.html#flagging-inappropriate-data-use" target="_blank">process in Synapse to flag</a> affected data.</p></li>
<li><p>We are also interested in rapidly identifiying data that does not conform to our quality control standards. If you discover data is contaminated or sample identity is questionable due to a concordance analysis, for example, please reach out to the curation team, <a href="mailto:PEC__SageAdmin@synapse.org" target="_blank">PEC_SageAdmin@synaspse.org</a>.</p></li>
</ul>
</div>
<div id="terminology" class="section level2">
<h2 class="hasAnchor">
<a href="#terminology" class="anchor"></a>Terminology</h2>
<div id="what-is-a-biospecimen" class="section level4">
<h4 class="hasAnchor">
<a href="#what-is-a-biospecimen" class="anchor"></a>What is a biospecimen?</h4>
<p>A biospecimen is a sample of material such as tissue, cells, DNA, RNA or protein that has a unique identifier associated to it - <code>specimenID</code>. The same biospecimen may be characterized in multiple assay types. In this case, the unique identifier should remain the same. We strongly recommend you do <em>not</em> name specimens using individual identifiers. In the case where multiple sequencing libaries are prepared from a single biospecimen, <code>LibraryID</code> is an available key. Replicates are tracked using integers and the keys <code>technicalReplicate</code> and <code>sequencingReplicate</code>.</p>
</div>
<div id="what-is-a-manifest-how-is-a-manifest-different-than-a-metadata-file" class="section level4">
<h4 class="hasAnchor">
<a href="#what-is-a-manifest-how-is-a-manifest-different-than-a-metadata-file" class="anchor"></a>What is a manifest? How is a manifest different than a metadata file?</h4>
<p>A manifest is .tsv or .txt file with data files to be uploaded to Synapse as entries in each row. Details of a manifest are described in the <a href="https://docs.synapse.org/articles/uploading_in_bulk.html" target="_blank">Uploading and Downloading Data in Bulk</a> Synapse User Guide. While a metadata file will be stored on Synapse as a flat file, and select variables added as file annotations, all variables in a manifest file will live as annotations respective to the file in that row. To successfully upload a file, you must specify the local <code>path</code> to the file and the Synapse ID of the folder in the <code>parent</code> column.</p>
</div>
<div id="can-i-track-relationships-between-files-in-synapse-as-i-upload-data" class="section level4">
<h4 class="hasAnchor">
<a href="#can-i-track-relationships-between-files-in-synapse-as-i-upload-data" class="anchor"></a>Can I track relationships between files in Synapse as I upload data?</h4>
<p>Yes, Synapse supports <a href="https://docs.synapse.org/articles/provenance.html" target="_blank">Provenance</a>! Provenance can be leveraged to connect raw data to reprocessed or summarized data. Populate the <code>used</code> column in the manifest with the synID. The required values format for linking multiple files is <code>used = synID;synID</code>.</p>
</div>
<div id="can-i-associate-relevant-code-to-files" class="section level4">
<h4 class="hasAnchor">
<a href="#can-i-associate-relevant-code-to-files" class="anchor"></a>Can I associate relevant code to files?</h4>
<p>Yes, with <a href="https://docs.synapse.org/articles/provenance.html" target="_blank">Provenance</a>. Populate the <code>executed</code> column with the url to your Github repo.</p>
</div>
</div>
<div id="study-and-assay-documentation-upload" class="section level2">
<h2 class="hasAnchor">
<a href="#study-and-assay-documentation-upload" class="anchor"></a>Study and assay documentation upload</h2>
<p>Each study in PEC will have accompanying documentation in the PEC portal. Here is an example of study <a href="https://adknowledgeportal.synapse.org/#/Explore/Studies?Study=syn8391648" target="_blank">documentation in the Accelerating Medicines Partnership in Alzheimer’s Disease portal</a>, developed by Sage Bionetworks.</p>
<p>You can submit your documentation through the dccvalidator app on the Documentation page. There should be a study description for the whole study, and an assay description for each of the assays that was performed. These can be in a single file, or you can upload multiple files to the assay description section.</p>
<div id="how-do-i-get-access-to-a-staging-folder-to-upload-data" class="section level4">
<h4 class="hasAnchor">
<a href="#how-do-i-get-access-to-a-staging-folder-to-upload-data" class="anchor"></a>How do I get access to a Staging folder to upload data?</h4>
<p>With a new study, there may not yet be a <strong>Staging folder</strong> in the PEC Knowledge Portal. Please contact us - <a href="mailto:PEC__SageAdmin@synapse.org" target="_blank">PEC_SageAdmin@synaspse.org</a>.</p>
</div>
</div>
<div id="data-validation" class="section level2">
<h2 class="hasAnchor">
<a href="#data-validation" class="anchor"></a>Data validation</h2>
<div id="metadata-requirements" class="section level3">
<h3 class="hasAnchor">
<a href="#metadata-requirements" class="anchor"></a>Metadata requirements</h3>
<p>Each study should include metadata that would help a new researcher understand and reuse the data. In most cases, we will expect 4 files:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Individual metadata</strong> describing each individual in the study
<ul>
<li>Each row corresponds to a unique individual</li>
</ul>
</li>
<li>
<strong>Biospecimen metadata</strong> describing the specimens that were collected</li>
<li>
<strong>Assay metadata</strong> describing the assay that was performed. If multiple assays were part of the study, there will be one assay file for each.</li>
<li>A <strong>manifest</strong> listing each file that will be uploaded. Remember to include your metadata files in the manifest.</li>
</ol>
<p>Metadata file templates are <a href="https://www.synapse.org/#!Synapse:syn20729790" target="_blank">available in the PsychENCODE Knowledge Portal resources</a>.</p>
<p>If you don’t see a template for the assay(s) in your study, please send a request for a new schema to <a href="mailto:PEC_SageAdmin@synapse.org" target="_blank">PEC_SageAdmin@synapse.org</a>. We depend on your expertise to develop schemas that capture the most pertinent metadata!</p>
</div>
<div id="validating-metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#validating-metadata" class="anchor"></a>Validating metadata</h3>
<p>The data validation portion of the app allows you to upload metadata files (as .csv) and the manifest (as .tsv or .txt) and view the results of a series of automated checks.</p>
<p>Examples of the types of checks we perform are: - All required columns from the templates are present - Individuals and specimens have unique identifiers - Metadata terms conform to a controlled vocabulary, where applicable</p>
</div>
<div id="viewing-data-summary" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-data-summary" class="anchor"></a>Viewing data summary</h3>
<p>We also provide a summary of the files you have uploaded, showing the number of individuals, specimens, and files. We visualize the data in each column by its data type to help spot unexpected missing values.</p>
</div>
</div>
<div id="types-of-data-to-upload" class="section level2">
<h2 class="hasAnchor">
<a href="#types-of-data-to-upload" class="anchor"></a>Types of data to upload</h2>
<p>The <a href="https://www.synapse.org/#!Synapse:syn20959298" target="_blank">Data Analysis Core</a> will reprocess common data types during PEC Phase II. Currently, common data types are RNASeq, ATACSeq, ChipSeq and all single cell data. For common data types, <strong>only fastq files are required</strong>. For other data types, please provide <strong>fastq</strong> and <strong>bam</strong> files.</p>
<div id="raw" class="section level4">
<h4 class="hasAnchor">
<a href="#raw" class="anchor"></a>Raw</h4>
<ul>
<li>
<strong>fastq</strong> - All lanes and barcodes of the same replicate are merged into one file per paired-end. Therefore, each specimenID will be associate to at least two files for each paired-end read. We recommend to include specimenID in the filename.</li>
</ul>
</div>
<div id="processed" class="section level4">
<h4 class="hasAnchor">
<a href="#processed" class="anchor"></a>Processed</h4>
<ul>
<li><p><strong>count matricies</strong> - RNASeq, ChIPSeq and ATACSeq data all produce count matricies. These file types are especially useful for data users who want to compare their own datasets without bioinformatic processing.</p></li>
<li><p><strong>peaks</strong> - A processed data type specific to ChIPSeq output.</p></li>
</ul>
</div>
</div>
<div id="uploading-data-to-synapse-after-validation" class="section level2">
<h2 class="hasAnchor">
<a href="#uploading-data-to-synapse-after-validation" class="anchor"></a>Uploading data to Synapse after validation</h2>
<p>Once data has passed validation, and the PEC data curators permit edit permissions to the <strong>Staging</strong> folder, you will use your newly created manifest file to upload data using <code>syncToSynapse</code>. You can execute <code>syncToSynapse</code> in the <a href="https://python-docs.synapse.org/build/html/synapseutils.html#synapseutils.sync.syncToSynapse" target="_blank">Python client</a> and <a href="https://github.com/Sage-Bionetworks/synapserutils#upload-data-in-bulk" target="_blank">R client</a>. The Synapse Python client supports multithreaded upload and will provide faster upload speeds than the Synapse R client. For getting started with the Synapse programmatic clients, please visit our <a href="https://docs.synapse.org/articles/api_documentation.html" target="_blank">Synapse docs</a>.</p>
</div>
<div id="data-release" class="section level2">
<h2 class="hasAnchor">
<a href="#data-release" class="anchor"></a>Data Release</h2>
<p>Data is uploaded to a <strong>Staging</strong> folder, private to each individual group. Once curated, data is moved to a <strong>PEC</strong> folder for a limited period of time where all consortium members have access to the data via the PEC Team. Finally, data is made public to Synapse users in a <strong>Data</strong> folder. All data upload takes place in the <a href="https://www.synapse.org/#!Synapse:syn4921369/wiki/235539" target="_blank">PsychENCODE Knowledge Portal</a> Synapse Project. While access to the project is public, restrictions are associated with the <strong>Staging</strong> and <strong>PEC</strong> folder to make sure the data remains private for the appropriate period of time.</p>
<p>Synapse IDs are always preserved (i.e. IDs remain associated to the file).</p>
</div>
<div id="get-support" class="section level2">
<h2 class="hasAnchor">
<a href="#get-support" class="anchor"></a>Get support</h2>
<p>Please send questions to <a href="mailto:PEC_SageAdmin@synapse.org" target="_blank">PEC_SageAdmin@synapse.org</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kara Woo, Nicole Kauer, Kelsey Montgomery.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
